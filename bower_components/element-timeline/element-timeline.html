<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">

<polymer-element name="element-timeline" attributes = "transId arrayIndex">
  <template>    
    <link rel="stylesheet" href="element-timeline.css">
    <style>
      paper-icon-button {
        float : right;
        padding-top: 0px;
      }
      h2{
        display: inline-block;
      }
    </style>
      <div class="cd-timeline-block">
        <content select="div"></content>
        <!-- <div class="cd-timeline-img cd-picture">
          <content select="img"></content>        
        </div>  cd-timeline-img --> 
        <div class="cd-timeline-content" layout >
          <paper-icon-button icon="delete" id="deleteAction" on-click="{{trashClicked}}"></paper-icon-button>
          <content select="h2"></content>
          <content select="p"></content>        
          <content select="span"></content>        
          <content></content>  
        </div> <!-- cd-timeline-content -->      
      </div>      
     <!-- cd-timeline-block -->
  </template>
  <script>
    Polymer(
         {
            trashClicked : function()
            {
                var elementId = this.transId;
                var arrayIndex = this.arrayIndex;                
                var formArray = document.querySelector('form-timeline').summaryTemp;                
                
                TransactionModel.findBy(persistence, 'id',elementId,function(res)
                {
                  persistence.remove(res);
                  formArray.splice(arrayIndex, 1);
                  persistence.flush();
                });                
              }
            });
  </script>
</polymer-element>